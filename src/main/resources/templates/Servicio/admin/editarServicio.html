<!-- ===================================================== -->
<!-- Archivo HTML para editar servicio / HTML file for editing a service -->
<!-- ===================================================== -->
<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">

<head>
    <!-- Codificaci√≥n de caracteres / Character encoding -->
    <meta charset="UTF-8">

    <!-- T√≠tulo din√°mico de la p√°gina / Dynamic page title -->
    <title th:text="${title} ?: 'Editar Servicio'">Editar Servicio</title>

    <!-- ===================================================== -->
    <!-- Fuente Poppins desde Google Fonts / Poppins font from Google Fonts -->
    <!-- ===================================================== -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;800&display=swap" rel="stylesheet">

    <!-- ===================================================== -->
    <!-- Bootstrap y hoja de estilos global / Bootstrap and global stylesheet -->
    <!-- ===================================================== -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css">
    <link rel="stylesheet" th:href="@{/css/styles.css}"/>

    <style>
        /* ===================================================== */
        /* Variables de color y tema / Color and theme variables */
        /* ===================================================== */
        :root {
            --bg:#F8EDE3; --tone-2:#DFD3C3; --tone-3:#D0B8A8; --brand:#C5705D;
            --brand-600:#a85848; --text:#3b2f2f; --surface:#ffffff; --ring:rgba(197,112,93,.35);
            --line:#e6d7ce;
        }

        /* Ajustes b√°sicos del modelo de caja / Basic box model setup */
        * { box-sizing: border-box }

        /* Altura completa del documento / Full height for the document */
        html, body { height: 100% }

        /* Estilo general del cuerpo / General body styling */
        body {
            background: var(--bg);
            color: var(--text);
            font-family: Poppins, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, Arial, sans-serif;
        }

        /* ===== NAV ===== */
        /* Barra de navegaci√≥n principal / Main navigation bar */
        .se-nav {
            position: sticky; top: 0; z-index: 50;
            background: linear-gradient(90deg,var(--bg),var(--tone-2));
            border-bottom: 1px solid var(--line);
            backdrop-filter: saturate(1.1) blur(4px);
        }

        /* Marca o nombre del sitio / Brand or site name */
        .se-brand {
            font-weight: 800; letter-spacing: .2px; color: var(--brand-600)!important; text-decoration: none; font-size: 20px;
        }

        /* Estilo para chips o etiquetas visuales / Style for visual chips or tags */
        .se-chip {
            background: var(--surface); border: 1px solid var(--tone-2); border-radius: 999px;
            padding: .55rem .95rem; box-shadow: 0 6px 16px rgba(0,0,0,.06); font-weight: 700;
        }

        /* Bot√≥n con color de marca / Brand-colored button */
        .btn-brand { background: var(--brand); border-color: var(--brand); color: #fff; }

        /* Efecto hover para bot√≥n de marca / Hover effect for brand button */
        .btn-brand:hover { filter: brightness(.96); color: #fff; }

        /* Bot√≥n con estilo fantasma / Ghost button style */
        .btn-ghost { background: var(--surface); border: 1px solid var(--tone-2); color: var(--text); }

        /* Efecto de foco en campos / Focus effect on inputs */
        .form-control:focus, .form-select:focus {
            border-color: var(--brand)!important; box-shadow: 0 0 0 .25rem var(--ring)!important;
        }

        /* ===== CARD ===== */
        /* Tarjeta de formulario principal / Main form card */
        .se-card {
            background: var(--surface); border: 1px solid var(--tone-2);
            border-radius: 18px; padding: 1.25rem; box-shadow: 0 10px 28px rgba(0,0,0,.06);
        }

        /* Texto de ayuda en formularios / Form helper text */
        .form-hint { font-size: .9rem; color: #6b5a52; }
    </style>
</head>

<body>

<!-- ===================================================== -->
<!-- NAV / Barra de navegaci√≥n superior / Top navigation bar -->
<!-- ===================================================== -->
<nav class="se-nav py-3" role="navigation" aria-label="Principal">
    <div class="container d-flex align-items-center justify-content-between gap-3">
        <!-- Enlace de la marca principal / Main brand link -->
        <a class="se-brand" th:href="@{/}">ServiExpress</a>

        <!-- Grupo de enlaces del men√∫ / Menu links group -->
        <div class="d-flex align-items-center gap-2">
            <a th:href="@{/Admins/servicios}" class="btn btn-ghost se-chip">Servicios</a>
            <a th:href="@{/Admins/usuarios}" class="btn btn-ghost se-chip">Usuarios</a>
            <a th:href="@{/solicitud/historial}" class="btn btn-ghost se-chip">üìú Ver Historial</a>

            <!-- Formulario para cerrar sesi√≥n / Logout form -->
            <form th:action="@{/auth/logout}" method="post" class="m-0 p-0">
                <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}">
                <button class="btn btn-outline-danger se-chip" type="submit">Cerrar sesi√≥n</button>
            </form>
        </div>
    </div>
</nav>

<!-- ===================================================== -->
<!-- Contenido principal / Main content -->
<!-- ===================================================== -->
<main class="container my-4">
    <div class="d-flex align-items-center justify-content-between mb-3">
        <h1 class="m-0 fw-bold">Editar Servicio</h1>
        <a th:href="@{/Admins/servicios}" class="btn btn-ghost se-chip">‚Üê Volver</a>
    </div>

    <!-- Mensajes de √©xito o error / Success or error messages -->
    <div th:if="${success}" class="alert alert-success se-card mb-3" th:text="${success}"></div>
    <div th:if="${error}" class="alert alert-danger se-card mb-3" th:text="${error}"></div>

    <!-- ===================================================== -->
    <!-- Formulario de edici√≥n de servicio / Service edit form -->
    <!-- ===================================================== -->
    <form th:action="@{/servicio/editar/{id}(id=${servicio.idServicio})}"
          method="post" th:object="${servicio}" class="se-card">

        <!-- Protecci√≥n CSRF / CSRF protection -->
        <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}"/>
        <input type="hidden" th:field="*{idServicio}"/>

        <!-- Campos del formulario / Form fields -->
        <div class="row g-3">
            <!-- Campo de nombre / Name field -->
            <div class="col-12 col-md-6">
                <label for="nombre" class="form-label fw-semibold">Nombre</label>
                <input type="text" id="nombre" th:field="*{nombre}" required class="form-control">
                <div class="text-danger small mt-1" th:if="${#fields.hasErrors('nombre')}" th:errors="*{nombre}"></div>
            </div>

            <!-- Campo de precio / Price field -->
            <div class="col-12 col-md-6">
                <label for="precio" class="form-label fw-semibold">Precio</label>
                <input type="number" id="precio" th:field="*{precio}" step="0.01" min="0" required class="form-control">
                <div class="text-danger small mt-1" th:if="${#fields.hasErrors('precio')}" th:errors="*{precio}"></div>
            </div>

            <!-- Campo de descripci√≥n / Description field -->
            <div class="col-12">
                <label for="descripcion" class="form-label fw-semibold">Descripci√≥n</label>
                <textarea id="descripcion" th:field="*{descripcion}" class="form-control" rows="3" required></textarea>
                <div class="text-danger small mt-1" th:if="${#fields.hasErrors('descripcion')}" th:errors="*{descripcion}"></div>
            </div>

            <!-- Combo visible solo para ADMIN / Combo visible only for ADMIN -->
            <div class="col-12 col-md-6" th:if="${rol == 'ADMIN'}">
                <label for="proveedor" class="form-label fw-semibold">Proveedor</label>
                <select id="proveedor" name="proveedorId" required class="form-select">
                    <option value="" disabled>Seleccione un proveedor</option>
                    <option th:each="prov : ${proveedores}"
                            th:value="${prov.idUsuario}"
                            th:text="${prov.nombreUsuario}"
                            th:selected="${servicio.proveedor != null and prov.idUsuario == servicio.proveedor.idUsuario}">
                    </option>
                </select>
            </div>

            <!-- Campo de estado del servicio / Service status field -->
            <div class="col-12 col-md-6">
                <label for="estado" class="form-label fw-semibold">Estado</label>
                <select id="estado" th:field="*{estado}" class="form-select" required>
                    <option value="" disabled>Seleccione un estado</option>
                    <option th:each="estado : ${estados}" th:value="${estado}" th:text="${estado}"></option>
                </select>
                <div class="form-hint mt-1">Este campo solo describe el cat√°logo; no depende de solicitudes. / This field only describes the catalog; it is not linked to requests.</div>
            </div>
        </div>

        <!-- Botones de acci√≥n / Action buttons -->
        <div class="d-flex justify-content-between mt-4">
            <a th:href="@{/servicio}" class="btn btn-secondary">Cancelar</a>
            <button type="submit" class="btn btn-brand text-white">Actualizar</button>
        </div>
    </form>
</main>

</body>
</html>

<!-- ===================================================== -->
<!-- Resumen t√©cnico / Technical Summary:
- Este HTML permite editar un servicio existente.
- Integra Thymeleaf para bindear el objeto 'servicio' con campos: nombre, precio, descripci√≥n, proveedor y estado.
- CSRF token incluido para seguridad de Spring Security.
- Se muestran mensajes de √©xito o error din√°micos desde el servidor.
- La interfaz utiliza Bootstrap y estilos personalizados para un dise√±o moderno.
- Botones de acci√≥n: 'Actualizar' env√≠a el formulario, 'Cancelar' vuelve al listado de servicios.
- Campos ADMIN-only se muestran solo si el rol del usuario es 'ADMIN'.
-->
